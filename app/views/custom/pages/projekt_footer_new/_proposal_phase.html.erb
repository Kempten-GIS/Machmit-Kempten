<div class="flex-column">
  <div class="main-column">
    <%= render "shared/loader_spinner" %>
    <% proposal_footer_url = projekt_phase_footer_tab_page_path(@projekt_phase.projekt.page, @projekt_phase.id) %>
    <%= render(
      Shared::ResourcesListComponent.new(
        resources: @proposals,
        resource_type: Proposal,
        remote_url: projekt_footer_phase_filter_url(@projekt_phase),
        map_coordinates: @proposals_coordinates,
        current_filter: @current_order,
        filter_param: "order",
        filters: @valid_orders,
        text_search_enabled: true,
        empty_list_text: "No proposals"
      )) %>
    <%= paginate @proposals, remote: true, params: { controller: "pages", action: "projekt_phase_footer_tab" } %>
  </div>

  <aside id="proposals-sidebar" class="sidebar">
    <%= render Shared::NewButtonComponent.new(projekt_phase: @projekt_phase) %>

    <%# <%= render Sidebar::Filters::GeozoneAffiliationsCardComponent.new(
    <%#   geozones: @geozones,
    <%#   resource_name: @resource_name
    <%# ) %>

    <%# <%= render Sidebar::Filters::GeozoneRestrictionsCardComponent.new(
    <%#   geozones: @geozones,
    <%#   restricted_geozones: @restricted_geozones,
    <%#   selected_geozone_restriction: @selected_geozone_restriction
    <%# ) %>

    <% if current_user.present? && extended_feature?('proposals.enable_my_posts_filter') %>
      <%= render Sidebar::Filters::MyPostsCardComponent.new %>
    <% end %>

    <%= render Sidebar::ExportListComponent.new(
      path: admin_proposals_path(**request.query_parameters, format: :csv),
    ) %>
  </aside>
</div>
